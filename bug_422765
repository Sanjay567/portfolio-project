yr302(config-router-ospf)#?
  adjacency                 Configure adjacency options for OSPF instance
  area                      Configure OSPF area
  auto-cost                 Set auto-cost
  bfd                       Enable BFD
  compatible                Set compatibility
  default-information       Default route related configuration
  distance                  Configure administrative distance
  distribute-list           Distribute list
  dn-bit-ignore             Disable dn-bit check for Type-3 LSAs in non-default VRFs
  ecmp                      Configure ecmp parameters
  graceful-restart          Enable graceful restart mode
  graceful-restart-helper   Enable graceful restart helper
  ip                        IP config commands
  log-adjacency-changes     Enable logging of adjacency events
  max-lsa                   Maximum number of LSAs permitted in this instance
  max-metric                Set maximum metric
  maximum-paths             Maximum number of next-hops in an ECMP route
  mpls                      MPLS sync configuration
  network                   Configure routing for a network
  passive-interface         Include interface but without actively running OSPF
  point-to-point            Configure Point-to-point specific features
  redistribute              Redistribute routes in to OSPF
  retransmission-threshold  Configure threshold for retransmission
  router-id                 Configure the router ID for the OSPF instance
  shutdown                  Disable the OSPF instance
  summary-address           Summary route configuration
  timers                    Configure OSPF timers
  traffic-engineering       Enter traffic engineering config mode
  tunnel                    GRE tunnels
  ----------------------------------------
  comment                   Up to 240 characters, comment for this mode
  default                   Set a command to its defaults
  exit                      Exit from OSPF configuration mode
  no                        Disable the command that follows
  show                      Display details of switch operation
  !!                        Append to comment

yr302(config-router-ospf)#area ?
  A.B.C.D         OSPF area-id in IP address format
  <0-4294967295>  OSPF area-id in decimal format

yr302(config-router-ospf)#area 1.2.3.4 ?
  default-cost   Specify the cost for default summary route in stub/NSSA area
  filter         Specify the filter for incoming summary LSAs
  not-so-stubby  Configure NSSA parameters
  nssa           Configure NSSA parameters
  range          Configure route summarization
  stub           Configure a stub area

yr302(config-router-ospf)#area 1.2.3.4 stub ?
  no-summary  Filter all type-3 LSAs in the stub area
  <cr>

yr302(config-router-ospf)#area 1.2.3.4 stub
yr302(config-router-ospf)#sh ac
router ospf 1
   area 1.2.3.4 stub
   max-lsa 12000
yr302(config-router-ospf)#no area 1.2.3.4 stub
yr302(config-router-ospf)#sh ac
router ospf 1
   max-lsa 12000
yr302(config-router-ospf)#area 1.2.3.4 stub
yr302(config-router-ospf)#sh ac
router ospf 1
   area 1.2.3.4 stub
   max-lsa 12000
yr302(config-router-ospf)#no area
% Incomplete command
yr302(config-router-ospf)#no area ?
  A.B.C.D         OSPF area-id in IP address format
  <0-4294967295>  OSPF area-id in decimal format

yr302(config-router-ospf)#no area 1.2.3.4 ?
  default-cost   Specify the cost for default summary route in stub/NSSA area
  filter         Specify the filter for incoming summary LSAs
  not-so-stubby  Configure NSSA parameters
  nssa           Configure NSSA parameters
  range          Configure route summarization
  stub           Configure a stub area
  <cr>

yr302(config-router-ospf)#no area 1.2.3.4
yr302(config-router-ospf)#sh ac
router ospf 1
   max-lsa 12000
yr302(config-router-ospf)#area 0.0.0.0 stub
% Backbone cannot be configured as stub area
yr302(config-router-ospf)#area 1.2.3.4 stub no-summary ?
  <cr>

yr302(config-router-ospf)#area 1.2.3.4 stub no-summary
yr302(config-router-ospf)#sh ac
router ospf 1
   area 1.2.3.4 stub no-summary
   max-lsa 12000
yr302(config-router-ospf)#no area 1.2.3.4
yr302(config-router-ospf)#sh ac
router ospf 1
   max-lsa 12000

yr302(config-router-ospf)#area 1.2.3.4 stub no-summary
yr302(config-router-ospf)#sh ac
router ospf 1
   area 1.2.3.4 stub no-summary
   max-lsa 12000
yr302(config-router-ospf)#area 1.2.3.4 stub
yr302(config-router-ospf)#sh ac
router ospf 1
   area 1.2.3.4 stub no-summary
   max-lsa 12000
yr302(config-router-ospf)#no area 1.2.3.4 stub
yr302(config-router-ospf)#sh ac
router ospf 1
   max-lsa 12000
yr302(config-router-ospf)#


do529(config-router-ospf)#area 1.2.3.4 stub
do529(config-router-ospf)#sh ac
router ospf 1
   area 1.2.3.4 stub
   max-lsa 12000
do529(config-router-ospf)#no area 1.2.3.4
do529(config-router-ospf)#sh ac
router ospf 1
   max-lsa 12000
do529(config-router-ospf)#area 1.2.3.4 stub no-summary ?
  <cr>

do529(config-router-ospf)#area 1.2.3.4 stub no-summary
do529(config-router-ospf)#sh ac
router ospf 1
   area 1.2.3.4 stub no-summary
   max-lsa 12000
do529(config-router-ospf)#no area 1.2.3.4 stub no-summary
do529(config-router-ospf)#sh ac
router ospf 1
   area 1.2.3.4 stub
   max-lsa 12000
do529(config-router-ospf)#no area 1.2.3.4 stub
do529(config-router-ospf)#sh ac
router ospf 1
   max-lsa 12000
do529(config-router-ospf)#area 1.2.3.4 stub no-summary
do529(config-router-ospf)#sh ac
router ospf 1
   area 1.2.3.4 stub no-summary
   max-lsa 12000
do529(config-router-ospf)#no area 1.2.3.4
do529(config-router-ospf)#sh ac
router ospf 1
   max-lsa 12000


   --- //src/Ospf/sanjaym-ext.fix.422765/CliPlugin/RoutingOspfCli.py	#1
   +++ src/Ospf/CliPlugin/RoutingOspfCli.py	2019-10-10 03:38:22.309441564 -0700
   @@ -590,11 +590,11 @@
             return False
          return True

   -   def setStub( self, areaId ):
   -      if str( Arnet.IpAddress( areaId ) ) == '0.0.0.0':
   +   def setStub( self, args ):
   +      if str( Arnet.IpAddress( args.get( 'AREA_ID' ) ) ) == '0.0.0.0':
             self.addError( 'Backbone cannot be configured as stub area' )
             return
   -      areaConfig = self._getOrCreateAreaConfig( areaId )
   +      areaConfig = self._getOrCreateAreaConfig( args.get( 'AREA_ID' ) )
          if not areaConfig:
             return
          if not self._stubAllowed( areaConfig ):
   @@ -605,24 +605,24 @@
          if areaConfig.areaType != 'areaTypeStubNoSummary':
             areaConfig.areaType = 'areaTypeStub'

   -   def noStub( self, areaId, noSummary=None ):
   -      areaConfig = self._getAreaConfig( areaId )
   +   def noStub( self, args ):
   +      areaConfig = self._getAreaConfig( args.get( 'AREA_ID' ) )
          if not areaConfig:
             return
          if not self._stubAllowed( areaConfig ):
             return
   -      if noSummary:
   +      if 'no-summary' in args:
             areaConfig.areaType = 'areaTypeStub'
          else:
             areaConfig.areaType = 'areaTypeNormal'
             areaConfig.originateDefaultSummary = False
   -      self._deleteAreaConfigIfAllAttributeHaveDefaults( areaId )
   +      self._deleteAreaConfigIfAllAttributeHaveDefaults( args.get( 'AREA_ID' ) )

   -   def setStubNoSummary( self, areaId ):
   -      if str( Arnet.IpAddress( areaId ) ) == '0.0.0.0':
   +   def setStubNoSummary( self, args ):
   +      if str( Arnet.IpAddress( args.get( 'AREA_ID' ) ) ) == '0.0.0.0':
             self.addError( "Backbone cannot be configured as stub area" )
             return
   -      areaConfig = self._getOrCreateAreaConfig( areaId )
   +      areaConfig = self._getOrCreateAreaConfig( args.get( 'AREA_ID' ) )
          if not areaConfig:
             return
          if not self._stubAllowed( areaConfig ):
   @@ -2104,27 +2104,42 @@
    #-------------------------------------------------------------------------------
    # "[no|default] area <area-id> stub" command, in ospf mode.
    #-------------------------------------------------------------------------------
   +matcherStub = CliMatcher.KeywordMatcher( 'stub',
   +                                         helpdesc='Configure a stub area' )

   -tokenStub = CliParser.KeywordRule( 'stub',
   -                                   helpdesc='Configure a stub area' )
   +class OspfAreaStubCmd( CliCommand.CliCommandClass ):
   +   syntax = 'area AREA_ID stub'
   +   noOrDefaultSyntax = syntax
   +   data = {
   +          'area': areaKw,
   +          'AREA_ID': AreaIdExpression,
   +          'stub': matcherStub,
   +          }
   +   handler = RouterOspfMode.setStub
   +   noOrDefaultHandler = RouterOspfMode.noStub

   -RouterOspfMode.addCommand( ( tokenArea, areaIdRule, tokenStub,
   -                             RouterOspfMode.setStub ) )
   +RouterOspfMode.addCommandClass( OspfAreaStubCmd )

    #-------------------------------------------------------------------------------
    # "[no|default] area <area-id> stub no-summary" command, in ospf mode.
    #-------------------------------------------------------------------------------
   -tokenNoSummary = CliParser.KeywordRule( 'no-summary',
   -                                        helpdesc='Filter all type-3 LSAs'
   -                                                 ' in the stub area' )
   -
   -RouterOspfMode.addCommand( ( tokenArea, areaIdRule, tokenStub, tokenNoSummary,
   -                             RouterOspfMode.setStubNoSummary ) )
   -RouterOspfMode.addCommand( ( BasicCli.noOrDefault,
   -                             tokenArea, areaIdRule, tokenStub,
   -                             [ '>>noSummary', tokenNoSummary ],
   -                             RouterOspfMode.noStub ) )
   +matcherNoSummary = CliMatcher.KeywordMatcher( 'no-summary',
   +                                              helpdesc='Filter all type-3 LSAs'
   +                                                       ' in the stub area' )
   +
   +class OspfAreaStubCmdNoSummary( CliCommand.CliCommandClass ):
   +   syntax = 'area AREA_ID stub no-summary'
   +   noOrDefaultSyntax = 'area AREA_ID stub [ no-summary ]'
   +   data = {
   +          'area': areaKw,
   +          'AREA_ID': AreaIdExpression,
   +          'stub': matcherStub,
   +          'no-summary': matcherNoSummary,
   +          }
   +   handler = RouterOspfMode.setStubNoSummary
   +   noOrDefaultHandler = RouterOspfMode.noStub

   +RouterOspfMode.addCommandClass( OspfAreaStubCmdNoSummary )
    #-------------------------------------------------------------------------------
    # "[no|default] area <area-id> virtual-link <router-id>
    #                            [authentication [message-digest | null]]

    //src/Ospf/CliPlugin @sanjaym-ext-fix-422765.sjc% a4 change
    Change 13786569 created with 1 open file(s).
